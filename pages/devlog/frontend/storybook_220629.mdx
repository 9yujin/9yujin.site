import { Comment, Img } from "components";

# \[React] Storybook ì„¤ì • ë° Github Actions ë°°í¬ ìë™í™”

## 1\. ìŠ¤í† ë¦¬ë¶ ì„¤ì¹˜

- ê¸°ì¡´ í”„ë¡œì íŠ¸ì˜ ë£¨íŠ¸ ë””ë ‰í„°ë¦¬ ë‚´ì—ì„œ ì‹¤í–‰
- `.storybook` ë””ë ‰í† ë¦¬ ì•ˆì— `main.js`ì™€ `preview.js`ê°€ ìƒì„±ëœë‹¤.

```bash
# Add Storybook:
npx storybook init
```

- `npm run storybook` ëª…ë ¹ì–´ë¥¼ í†µí•´ ë¡œì»¬í˜¸ìŠ¤íŠ¸ 6006ë²ˆ í¬íŠ¸ì—ì„œ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤.

## 2\. Styled-components ì ìš©

- preview.jsì—ì„œ ì„¤ì •ì„ í•´ì¤€ë‹¤.

```jsx filename="preview.js"
import React from "react";
import { ThemeProvider } from "styled-components";
import { GlobalStyle } from "../src/lib/styles/global-style";
import { theme } from "../src/lib/styles/theme";

export const decorators = [
  (Story) => (
    <ThemeProvider theme={theme}>
      <GlobalStyle />
      <Story />
    </ThemeProvider>
  ),
];

export const parameters = {
  actions: { argTypesRegex: "^on[A-Z].*" },
  controls: {
    matchers: {
      color: /(background|color)$/i,
      date: /Date$/,
    },
  },
};
```

ThemeProviderì™€ GlobalStyleì´ ìŠ¤í† ë¦¬ë¶ ì•ˆì—ì„œë„ ì ìš©ë˜ë„ë¡ í•´ì£¼ì—ˆë‹¤.

## 3\. TypeScript Doc ê´€ë ¨ ì„¸íŒ…

ì´ì „ì— JSì—ì„œ ìŠ¤í† ë¦¬ë¶ì„ ì‚¬ìš©í–ˆì„ë•ŒëŠ” PropTypesë¡œ ì§ì ‘ íƒ€ì…ì„ ì§€ì •í•˜ê³  Docs í˜ì´ì§€ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆì—ˆë‹¤. typescriptì—ì„  typeì´ë‚˜ interfaceë¥¼ ì§€ì •í• ë•Œ ì£¼ì„ì„ í•¨ê»˜ ë‹¬ë©´ Docsì—ì„œ ë³¼ ìˆ˜ ìˆë‹¤.

```bash
yarn add --dev react-docgen-typescript-loader
```

## 4\. Canvas ë·°í¬íŠ¸ ì„¤ì •

ìŠ¤í† ë¦¬ë¶ ë‚´ì—ì„œ ì»´í¬ë„ŒíŠ¸ë¥¼ ê°ì‹¸ëŠ” ë·°í¬íŠ¸ì˜ í¬ê¸°ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.

```js
export const parameters = {
  actions: { argTypesRegex: "^on[A-Z].*" },
  controls: {
    matchers: {
      color: /(background|color)$/i,
      date: /Date$/,
    },
  },
  viewport: {
    viewports: {
      mobile1: {
        name: "iPhone 13 mini",
        styles: {
          width: "375px",
          height: "812px",
        },
        type: "mobile",
      },
      mobile2: {
        name: "iPhone 13 / 13 pro",
        styles: {
          width: "390px",
          height: "844px",
        },
        type: "mobile",
      },
      tablet1: {
        name: 'iPad Pro 11"',
        styles: {
          width: "834px",
          height: "1194px",
        },
        type: "tablet",
      },
    },
    defaultViewport: "mobile1",
  },
};
```

Preview.jsì˜ parametersì— ìœ„ì™€ ê°™ì€ ë‚´ìš©ì„ ì¶”ê°€í•œë‹¤. ì´ë²ˆ ê²½ìš°ì—ëŠ” ì„¸ ì¢…ë¥˜ì˜ ë·°í¬íŠ¸ë¥¼ ë„£ì–´ë†“ì•˜ê³ , ë””í´íŠ¸ ê°’ìœ¼ë¡œ í”¼ê·¸ë§ˆì—ì„œ ë””ìì¸ëœ ì‚¬ì´ì¦ˆë¡œ í•´ë‘ì—ˆë‹¤.

![](https://blog.kakaocdn.net/dn/c3hH2i/btrF4Gm6fnn/x2KUDOwxz3WrP7BeilWEwK/img.gif)

## 5.Â  ìŠ¤í† ë¦¬ë¶ ë‚´ íŒ¨ë”© ì„¤ì •

ìœ„ì—ì„œ ë·°í¬íŠ¸ë„ ë””ìì¸ëœ ê²ƒì— ë§ì¶”ì–´ì„œ ì„¤ì •í•´ ë†“ì•˜ëŠ”ë°, ìŠ¤í† ë¦¬ë¶ì—ì„œ ê¸°ë³¸ìœ¼ë¡œ ì„¤ì •í•´ë†“ì€ ë§ˆì§„(16px)ì„ ìš°ë¦¬ ë””ìì¸ì— ë§ê²Œ ìˆ˜ì •í•˜ê³  ì‹¶ì—ˆë‹¤. ê°„ë‹¨í•˜ë‹¤.

```bash
npm install --save-dev storybook-addon-paddings
```

- npmì—ì„œ storybook-addon-paddingsë¥¼ ì„¤ì¹˜í•˜ê³ 
- main.jsì— ê°€ì„œ addonì— ë˜‘ê°™ì´ 'storybook-addon-paddings'ë¥¼ ì¶”ê°€í•´ì¤€ë‹¤.

![](https://blog.kakaocdn.net/dn/c3hH2i/btrF4Gm6fnn/x2KUDOwxz3WrP7BeilWEwK/img.gif)

## 6\.  github Actionìœ¼ë¡œ ë°°í¬ ì„¤ì •í•˜ê¸°

ì œì‘í•œ UIì»´í¬ë„ŒíŠ¸ë“¤ì„ ìŠ¤í† ë¦¬ë¶ì„ í†µí•´ ë¬¸ì„œí™”í•´ ê³µìœ í•˜ê¸°ì— ì¢‹ì€ ë°©ë²•ì´ë‹¤. ë””ìì´ë„ˆ ì…ì¥ì—ì„œëŠ” ë‚´ê°€ ì—´ì‹¬íˆ ë””ìì¸í•œ ì»´í¬ë„ŒíŠ¸ë“¤ì´ ì˜ êµ¬í˜„ë˜ê³  ìˆëŠ”ì§€ ê°ì‹œí•  ìˆ˜ ìˆë‹¤!! github Actionì„ ì´ìš©í•´ push ì•¡ì…˜ì´ ì˜¤ë©´ ìë™ìœ¼ë¡œ ê¹ƒí—ˆë¸Œ í˜ì´ì§€ì— ë°°í¬ë¥¼ í•˜ë ¤ê³  í•œë‹¤. [ë°°í¬ ë§í¬](https://bankidz.github.io/bankidz-client/)

```bash
npm i @storybook/storybook-deployer --save-dev
```

- npmì—ì„œ storybook-deployerë¥¼ ì„¤ì¹˜í•˜ê³ 
- package.jsonì— ê°€ì„œ scriptsì— `deploy-storybook": "storybook-to-ghpages` ë¥¼ ì¶”ê°€í•´ì¤€ë‹¤.

```yaml filename="deploy.yml"
name: Build & Deploy Storybook
on:
  push:
    branches: [dev]
    paths: ["src/components/**"]
jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Install and Build ğŸ”§
        # This needs an Acces Token stored as "GH_TOKEN" ğŸ‘‡
        run: |
          npm install
          npm run deploy-storybook -- --ci
        env:
          GH_TOKEN: ${{ secrets.GH_TOKEN }}
```

ê¹ƒí—ˆë¸Œ ì›Œí¬í”Œë¡œìš° ë””ë ‰í† ë¦¬ì— .yml íŒŒì¼ì„ í•˜ë‚˜ ë§Œë“¤ì–´ì¤€ë‹¤.

dev ë¸Œëœì¹˜ì— pushê°€ ì˜¤ê³ , 'src/components' ë””ë ‰í† ë¦¬ì— ë³€ê²½ì‚¬í•­ì´ ìˆì„ ë•Œ ì•¡ì…˜ì´ ì‹¤í–‰ëœë‹¤.

ì²˜ìŒ ìŠ¤í† ë¦¬ë¶ì„ ì„¤ì¹˜í•˜ë©´ ìë™ìœ¼ë¡œ ìƒê¸°ëŠ” ì˜ˆì œ íŒŒì¼ë“¤ ì¤‘ì— .mdx íŒŒì¼ì´ ë“¤ì–´ìˆëŠ”ë°, ì´ ë•Œë¬¸ì— ë°°í¬ ì¤‘ì— ì—ëŸ¬ê°€ ë‚¬ë‹¤. ë¡œì»¬ì—ì„  ë¬¸ì œì—†ì´ ë¹Œë“œê°€ ë˜ëŠ”ë° ê¹ƒí—ˆë¸Œ ì•¡ì…˜ì„ í†µí•´ ë¹Œë“œí• ë•Œë§Œ ë¬¸ì œê°€ ìƒê²¼ë‹¤. **@mdx-js/react** ë¥¼ ì„¤ì¹˜í•´ì£¼ê³  ë‹¤ì‹œ pushë¥¼ ë‚ ë ¤ë³´ë‹ˆ ë¹Œë“œê°€ ì •ìƒì ìœ¼ë¡œ ë˜ëŠ”ê²ƒì„ í™•ì¸í–ˆë‹¤.

[ì°¸ê³ 1](https://devnm.tistory.com/4) [ì°¸ê³ 2](https://github.com/storybookjs/storybook-deployer#readme) [ì°¸ê³ 3](https://zeddios.tistory.com/1047)

ê·¸ë¦¬ê³  ì´ì „ì— ìŠ¤í† ë¦¬ë¶ì„ ì‚¬ìš©í–ˆë˜ [í›„ê¸°](https://9yujin.tistory.com/25?category=1025360)
